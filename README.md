# Набор скриптов tmdb_api
Cоздают локальную базу данных фильмов каталога [TMDB](https://www.themoviedb.org/). Предоставяют сервис поиска и подбора рекомендуемых к просмотру фильмов.
## Окружение и установка
Python должен быть установлен.
## Установка скрипта
- Скачайте код: [репозиторий GITHUB](https://github.com/DKonst21/tmdb_api.git), или клонируйте `git` репозиторий в локальную папку:
```
git clone https://github.com/DKonst21/tmdb_api.git
```
- Зарегистрирутесь на сайте [TMDB](https://www.themoviedb.org/) и получите персональный токен на странице параметров пользователя.
## Установка зависимостей
Используйте pip для установки зависимостей:
```bash
pip install -r requirements.txt
## Проект tmdb_api

Позволяет подбирать схожие фильмы из созданной базы данных фильмов.

	find_similar - главный файл для поиска рекомендованных фильмов
    search_in_db - файл для поиска точного названия фильма в базе данных
    hello_api_TMDB - файл по которому можно узнать один из параметров фильма
    make_own_db - файл создания своей базы данных фильмов
    tmdb_helpers - вспомогательный файл
    own_db_helpers - вспомогательный файл



### tmdb_helpers.py

Содержит функции работы с API сервиса TMDB `https://api.themoviedb.org/`.
Предлагает пользователю в консоли скрытно ввести API key сервиса TMDB. 
Выполняет запрос к API сервиса TMDB. Результат запроса возвращает словарём.


### make_own_db.py

Создаёт файл базы данных, в который скачивается с сайта 'https://themoviedb.org' информация о фильмах. 

В начале программа буднт запрашивать `api-key`, его можно получить с сайта 'https://themoviedb.org'
По умолчанию название файла будет `MyFilmDB.json`, а количество скачанных фильмов 1000

Это можно изменить в части кода if __name__ == '__main__':
 1. задать количество фильмов в базе данных films_amount = 1000
 2. задать путь сохранения базы данных и название файла `path='MyFilmDB.json'` в `with open(path='MyFilmDB.json', mode='w', encoding='utf-8') as my_file:`

Использует функции `tmdb_helpers.py`.
Запуск `python make_own_db.py`.


### own_db_helpers.py 

Загружает JSON файл базы данных фильмов. 
`load_data` проверяет наличие файла по входящему пути. В случае успеха, десериализует базу и возвращает словарь из файла, иначе `None`.
Загружает файл базы данных фильмов. 
Проверяет наличие файла базы по входящему пути. В случае успеха, возвращает содержимое базы словарём, иначе `None`.


### search_in_db.py

Перед поиском похожих фильмов стоит узнать его точно название. Это можно сделать в этом скрипте, вводя либо буквы, либо слово, которое непосредственно есть в жедаемом названии фильма.
В столбик выведутся названия фильмов, в котором присутствуют написанные пользователем буквы или слово:
```
Enter film to search for:saw
Saw
Saw II
Saw III
Saw IV
```
Использует `own_db_helpers.py`.
Запуск `python search_in_db.py`.


### hello_api_TMDB.py

Выводит в консоль бюджет затраченный на производство фильма `id = 215`.
Использует функции `tmdb_helpers.py`. Предлагает пользователю в консоли скрытно ввести API key сервиса TMDB. Выполняет запрос к API сервиса TMDB.
Запуск `python tmdb_helpers.py`.


### find_similar.py 

Поиск фильмов в локальной базе и подбор рекомендуемых к просмотру фильмов. 
Скрипт запрашивает в консоли у пользователя путь к файлу локальной базы фильмов `Enter path to DataBase:{MyFilmDB.json}`. Если файл не найден, выводит в консоль `File not found, sorry...`, завершает работу.
Далее запрашивает в консоли название фильма. Поиск осуществляет в оригинальном названии по точному совпадению. Если не находит, выводит в консоль `No such film in FilmsDB`, завершает работу. В случае успеха поиска, формирует список рекомендаций фильмов - функция **get_rating**. 
При формировании рекомендаций, фильмы из базы рейтингуются по удельными весам параметров найденного фильма:
```
# Параметр: Удельный вес параметра
'belongs_to_collection': 1000,
'original_language': 300,
'budget': 100,
'genres': 500
```
Функция `get_rating` возвращает список из 8-ми фильмов максимального рейтинга расчитанного согласно удельным весам параметров.
В конце скрипт выводит в консоль список из 8-ми фильмов в алфавитном порядке:
```
Enter path to DataBase:MyFilmDB.json
Enter film to search for:Blade Runner
Beverly Hills Cop II
Finding Nemo
Forrest Gump
Four Rooms
Indiana Jones and the Temple of Doom
Judgment Night
Life in Loops (A Megacities RMX)
Star Wars
Walk the Line
```

### .gitignore
.gitignore нужен для скрытия файлов и папок от системы контроля версий Git. Скрыты конфигурационные файлы, временные файли и папки. 
